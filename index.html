<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2026 æ—¥æœ¬é—œè¥¿ä¹‹æ—…</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; -webkit-tap-highlight-color: transparent; }
.hide-scrollbar::-webkit-scrollbar { display: none; }
.hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
.safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
.card-shadow { box-shadow: 0 4px 20px -2px rgba(0,0,0,0.05); }
.radar-ping { animation: ping 1.5s cubic-bezier(0,0,0.2,1) infinite; }
@keyframes ping { 75%,100%{ transform: scale(2); opacity: 0; } }
[v-cloak]{ display: none; }
</style>
</head>
<body class="text-slate-800 h-screen flex flex-col overflow-hidden">

<div id="app" v-cloak class="flex flex-col h-full relative">

  <!-- Header -->
  <header class="bg-white/90 backdrop-blur-md px-6 py-4 flex justify-between items-center z-20 border-b border-slate-100 sticky top-0">
    <div>
      <h1 class="text-xl font-bold tracking-tight text-slate-900">Japan 2026</h1>
      <div class="flex items-center gap-2">
        <p class="text-xs text-slate-500">10 Days Kansai & Nagoya</p>
        <span v-if="isSyncing" class="text-[10px] text-blue-500 flex items-center bg-blue-50 px-2 py-0.5 rounded-full">
          <i class="fa-solid fa-rotate fa-spin mr-1"></i>åŒæ­¥ä¸­...
        </span>
        <span v-else class="text-[10px] text-green-500 flex items-center bg-green-50 px-2 py-0.5 rounded-full">
          <i class="fa-solid fa-check mr-1"></i>å·²å„²å­˜
        </span>
      </div>
    </div>
    <div class="flex items-center gap-2 bg-slate-100 px-3 py-1.5 rounded-full">
      <span class="text-xs font-bold text-slate-500">Day {{ activeDay + 1 }}</span>
    </div>
  </header>

  <!-- Main -->
  <main class="flex-1 overflow-y-auto hide-scrollbar bg-slate-50 safe-bottom pb-24 relative">

    <!-- è¡Œç¨‹é  -->
    <div v-if="currentTab==='trip'" class="p-4 space-y-6">

      <!-- æ—¥æ•¸é¸æ“‡ -->
      <div class="flex gap-3 overflow-x-auto hide-scrollbar pb-2">
        <button v-for="(day,index) in itinerary" :key="index" 
                @click="activeDay=index"
                :class="activeDay===index?'bg-slate-800 text-white shadow-lg scale-105':'bg-white text-slate-400 border border-slate-100'"
                class="flex-shrink-0 w-14 h-16 rounded-2xl flex flex-col items-center justify-center transition-all duration-300">
          <span class="text-xs font-medium">1/{{ 19+index }}</span>
          <span class="text-xl font-bold">D{{ index+1 }}</span>
        </button>
      </div>

      <!-- å¤©æ°£ -->
      <div class="bg-gradient-to-r from-blue-500 to-indigo-600 rounded-3xl p-5 text-white shadow-lg shadow-indigo-200">
        <div class="flex justify-between items-start">
          <div>
            <div class="text-indigo-100 text-sm mb-1"><i class="fa-solid fa-location-dot mr-1"></i> {{ itinerary[activeDay]?.location }}</div>
            <div class="text-3xl font-bold">{{ getWeather(activeDay).temp }}Â°C</div>
            <div class="text-sm opacity-90">{{ getWeather(activeDay).desc }}</div>
          </div>
          <i :class="getWeather(activeDay).icon" class="text-4xl opacity-80"></i>
        </div>
      </div>

      <!-- è¡Œç¨‹åˆ—è¡¨ -->
      <div class="space-y-4" v-if="itinerary[activeDay]">
        <div v-for="(item,idx) in itinerary[activeDay].schedule" :key="idx" class="bg-white rounded-2xl p-4 card-shadow border border-slate-50 relative overflow-hidden group">
          <div class="absolute left-0 top-0 bottom-0 w-1" :class="getTypeColor(item.type)"></div>
          <div class="flex justify-between items-start mb-2">
            <div class="flex items-center gap-2">
              <span class="font-mono text-sm font-bold text-slate-400 bg-slate-50 px-2 py-0.5 rounded">{{ item.time }}</span>
              <span class="text-xs font-medium uppercase tracking-wider text-slate-400">{{ getTypeLabel(item.type) }}</span>
            </div>
            <div class="flex gap-2">
              <button @click="removeScheduleItem(idx)" class="text-slate-300 hover:text-red-500 w-8 h-8 flex items-center justify-center">
                <i class="fa-solid fa-trash-can text-sm"></i>
              </button>
              <a :href="'https://www.google.com/maps/search/?api=1&query='+encodeURIComponent(item.place)" target="_blank" 
                 class="bg-slate-900 text-white w-8 h-8 rounded-full flex items-center justify-center shadow-md active:scale-90 transition-transform">
                <i class="fa-solid fa-location-arrow text-xs"></i>
              </a>
            </div>
          </div>
          <h3 class="text-lg font-bold text-slate-800 mb-1 leading-tight">{{ item.place }}</h3>
        </div>
        <div v-if="itinerary[activeDay].schedule.length===0" class="text-center py-10 text-slate-400">
          <p>ä»Šå¤©é‚„æ²’æœ‰å®‰æ’è¡Œç¨‹</p>
        </div>
      </div>
    </div>

    <!-- å·¥å…·é  -->
    <div v-if="currentTab==='utils'" class="p-4 space-y-4">
      <h2 class="text-2xl font-bold px-2 mb-2">æ—…é€”å·¥å…·</h2>

      <!-- èˆªç­ -->
      <div class="bg-white rounded-2xl p-5 card-shadow">
        <h3 class="font-bold text-slate-800 mb-4 flex items-center"><i class="fa-solid fa-plane-departure text-indigo-500 mr-2"></i> èˆªç­è³‡è¨Š</h3>
        <div class="space-y-3 text-sm">
          <div class="flex justify-between border-b border-slate-50 pb-2"><span class="text-slate-500">å»ç¨‹ 01/19</span><span class="font-medium">TPE -> NGO (åå¤å±‹)</span></div>
          <div class="flex justify-between"><span class="text-slate-500">å›ç¨‹ 01/28</span><span class="font-medium">KIX (å¤§é˜ª) -> TPE</span></div>
        </div>
      </div>

      <!-- ä½å®¿ -->
      <div class="bg-white rounded-2xl p-5 card-shadow">
        <h3 class="font-bold text-slate-800 mb-4 flex items-center"><i class="fa-solid fa-bed text-indigo-500 mr-2"></i> ä½å®¿æ¸…å–®</h3>
        <div class="space-y-4">
          <div v-for="hotel in hotels" class="border-b border-slate-100 last:border-0 pb-2 last:pb-0 relative">
            <div class="font-medium text-slate-800">{{ hotel.name }}</div>
            <div class="text-xs text-slate-500 mt-1"><i class="fa-solid fa-map-pin mr-1"></i>{{ hotel.address }}</div>
            <a :href="'https://www.google.com/maps/search/?api=1&query='+encodeURIComponent(hotel.name)" target="_blank" class="absolute right-0 top-2 text-blue-500 bg-blue-50 px-3 py-1 rounded-full text-xs font-medium">å°èˆª</a>
          </div>
        </div>
      </div>

      <!-- ç·Šæ€¥è¯çµ¡ -->
      <div class="bg-red-50 rounded-2xl p-5 border border-red-100">
        <h3 class="font-bold text-red-800 mb-2"><i class="fa-solid fa-triangle-exclamation mr-2"></i> ç·Šæ€¥è¯çµ¡</h3>
        <div class="text-sm text-red-600 space-y-2">
          <div class="flex justify-between"><span class="font-bold">è­¦å¯Ÿ</span> <span>110</span></div>
          <div class="flex justify-between"><span class="font-bold">æ•‘è­·/ç«è­¦</span> <span>119</span></div>
          <div class="mt-2 pt-2 border-t border-red-200 text-xs">
            é§æ—¥ä»£è¡¨è™•: +81-3-3280-7811<br>
            æ—…å¤–åœ‹äººæ€¥é›£æ•‘åŠ©: +886-800-085-095
          </div>
        </div>
      </div>
    </div>

    <!-- è¨˜å¸³é  -->
    <div v-if="currentTab==='budget'" class="p-4">
      <div class="bg-white rounded-2xl p-6 card-shadow text-center mb-6">
        <div class="text-sm text-slate-400 mb-1">ç¸½æ”¯å‡º (TWD)</div>
        <div class="text-4xl font-bold text-slate-800">{{ totalExpense }} å…ƒ</div>
      </div>
      <div class="bg-white rounded-2xl p-4 card-shadow mb-6">
        <div class="grid grid-cols-2 gap-3 mb-3">
          <input v-model="newExpense.item" type="text" placeholder="é …ç›®" class="bg-slate-50 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
          <input v-model.number="newExpense.amount" type="number" placeholder="é‡‘é¡" class="bg-slate-50 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
        </div>
        <button @click="addExpense" class="w-full bg-slate-900 text-white rounded-xl py-3 text-sm font-bold shadow-md active:scale-95 transition-transform">æ–°å¢æ”¯å‡º</button>
      </div>
      <div class="space-y-3">
        <div v-for="(exp,index) in expenses" :key="index" class="flex justify-between items-center bg-white p-4 rounded-xl border border-slate-50">
          <span class="font-medium text-slate-700">{{ exp.item }}</span>
          <div class="flex items-center gap-3">
            <div class="text-right">
              <div class="font-bold text-slate-900">{{ exp.amount }}</div>
            </div>
            <button @click="removeExpense(index)" class="text-slate-300 hover:text-red-500 p-2"><i class="fa-solid fa-circle-minus"></i></button>
          </div>
        </div>
        <div v-if="expenses.length===0" class="text-center text-slate-400 text-sm mt-10">ç›®å‰æ²’æœ‰æ”¯å‡ºç´€éŒ„</div>
      </div>
    </div>

  </main>

  <!-- ä¸€ç•ªè³é›·é” -->
  <div v-if="currentTab==='trip'" class="fixed bottom-24 left-6 z-10">
    <button @click="alert('ä¸€ç•ªè³é›·é”åŠŸèƒ½')" class="bg-gradient-to-br from-yellow-400 to-orange-500 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center relative overflow-hidden active:scale-90 transition-transform">
      <span class="absolute inline-flex h-full w-full rounded-full bg-white opacity-30 radar-ping"></span>
      <i class="fa-solid fa-ticket text-xl relative z-10"></i>
    </button>
    <div class="text-[10px] text-center text-slate-500 font-bold mt-1 bg-white/80 backdrop-blur rounded px-1">ä¸€ç•ªè³</div>
  </div>

  <!-- æ–°å¢è¡Œç¨‹æŒ‰éˆ• -->
  <button v-show="currentTab==='trip'" @click="showAddModal=true" class="fixed bottom-24 right-6 bg-slate-900 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center active:scale-90 transition-transform z-10">
    <i class="fa-solid fa-plus text-xl"></i>
  </button>

  <!-- æ–°å¢è¡Œç¨‹ Modal -->
  <div v-if="showAddModal" class="fixed inset-0 z-50 flex items-end justify-center sm:items-center p-4 bg-black/50 backdrop-blur-sm" @click.self="showAddModal=false">
    <div class="bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl">
      <h3 class="text-lg font-bold mb-4">æ–°å¢ Day {{ activeDay+1 }} è¡Œç¨‹</h3>
      <div class="space-y-3">
        <div class="flex gap-2">
          <input v-model="newItem.time" type="time" class="w-1/3 bg-slate-50 rounded-xl px-4 py-3 text-sm font-bold">
          <select v-model="newItem.type" class="w-2/3 bg-slate-50 rounded-xl px-4 py-3 text-sm">
            <option value="sightseeing">ğŸ“¸ æ™¯é»</option>
            <option value="food">ğŸœ ç¾é£Ÿ</option>
            <option value="buy">ğŸ›ï¸ è³¼ç‰©</option>
            <option value="transport">ğŸš— äº¤é€š</option>
            <option value="accommodation">ğŸ¨ ä½å®¿</option>
          </select>
        </div>
        <input v-model="newItem.place" type="text" placeholder="åœ°é»åç¨±" class="w-full bg-slate-50 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500">
      </div>
      <div class="flex gap-3 mt-6">
        <button @click="showAddModal=false" class="flex-1 bg-slate-100 text-slate-600 py-3 rounded-xl font-medium">å–æ¶ˆ</button>
        <button @click="addScheduleItem" class="flex-1 bg-indigo-600 text-white py-3 rounded-xl font-bold shadow-lg">æ–°å¢</button>
      </div>
    </div>
  </div>

  <!-- åˆ†é å°è¦½ -->
  <nav class="bg-white/90 backdrop-blur-xl border-t border-slate-200 fixed bottom-0 w-full z-40 pb-safe">
    <div class="flex justify-around items-center h-16 safe-bottom">
      <button @click="currentTab='trip'" :class="currentTab==='trip'?'text-indigo-600':'text-slate-400'" class="flex flex-col items-center gap-1 w-20 transition-colors">
        <i class="fa-solid fa-map-location-dot text-xl"></i>
        <span class="text-[10px] font-medium">è¡Œç¨‹</span>
      </button>
      <button @click="currentTab='utils'" :class="currentTab==='utils'?'text-indigo-600':'text-slate-400'" class="flex flex-col items-center gap-1 w-20 transition-colors">
        <i class="fa-solid fa-suitcase text-xl"></i>
        <span class="text-[10px] font-medium">å·¥å…·</span>
      </button>
      <button @click="currentTab='budget'" :class="currentTab==='budget'?'text-indigo-600':'text-slate-400'" class="flex flex-col items-center gap-1 w-20 transition-colors">
        <i class="fa-solid fa-wallet text-xl"></i>
        <span class="text-[10px] font-medium">è¨˜å¸³</span>
      </button>
    </div>
  </nav>

</div>

<script>
const { createApp } = Vue;
createApp({
  data(){
    return{
      activeDay:0,
      currentTab:'trip',
      showAddModal:false,
      newItem:{ time:'', place:'', type:'sightseeing', tips:[] },
      isSyncing:false,
      itinerary:[
        { location:"å¸¸æ»‘å¸‚ â†’ æ„›çŸ¥ç¸£ â†’ åå¤å±‹å¸‚", schedule:[
          {time:"13:00", place:"åå¤å±‹ä¸­éƒ¨åœ‹éš›æ©Ÿå ´ (Nagoya Chubu Centrair Intl Airport)", type:"transport"},
          {time:"14:46", place:"10-18 TakebashichÅ", type:"accommodation"},
          {time:"16:12", place:"æ¦®ç”ºå•†åœˆ (Sakae Shopping District)", type:"sightseeing"},
          {time:"17:18", place:"å¯¶å¯å¤¢ä¸­å¿ƒåå¤å±‹åº— (Pokemon Center Nagoya)", type:"sightseeing"},
          {time:"20:00", place:"Sky Promenade (è§€æ™¯å°)", type:"sightseeing"},
          {time:"21:48", place:"æŸ³æ©‹ä¸­å¤®å¸‚å ´", type:"food"},
          {time:"22:55", place:"è¿”å› 10-18 TakebashichÅ", type:"accommodation"}
        ]},
        { location:"ä¸‹å‘‚å¸‚ â†’ æ„›çŸ¥ç¸£ â†’ å²é˜œ
